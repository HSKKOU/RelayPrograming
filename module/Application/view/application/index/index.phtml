<div id="app-body" class="wh100 exist_ui">

  <div id="code_chat_view" class="wh100">
    <!-- area for coded text -->
    <?= $this->code_view ?>

    <!-- area for chat text -->
    <?= $this->chat_view ?>

    <!-- area for members -->
    <?= $this->members_view ?>
  </div>

  <!-- area for user input -->
  <?= $this->user_input ?>
</div>

<!-- Login lightbox -->
<?= $this->loginlb ?>





<?php
$api_user = $this->url('api/default', array('controller' => 'user'));

$this->inlineScript()->appendScript(
<<<__END__

var \$loginForm = \$("#login_form");
\$loginForm.on("submit", function(_e){
  _e.preventDefault();
  var name = \$loginForm.find('.input_name > input').val(),
      color = \$loginForm.find('.input_color > input').val();
  log("user inputs", name, color);

  var postData = { "name": name, "color": color };
  post({"url": "$api_user", "type": "post", "query": postData,
    "success": function(_data){
      log("data", _data);
      
    },
    "fail": function(_data){
      log("data", _data);
      alert("Failed to create or login.");
    },
    "complete": function(_data){ /* nothing to do. */ }
  });
});

__END__
);
